import{a as h}from"./index.D3IKQ_MP.js";const a=document.getElementById("productForm");a.addEventListener("submit",r=>v(r));function v(r){r.preventDefault();const o=document.querySelector(".submit-btn"),e=document.getElementById("successMessage");document.getElementById("validationErrors");const t=new FormData(a),n=t.get("name"),s=t.get("email"),i=String(t.get("phone")).replace(" ",""),p=t.get("message"),E=t.get("ruc"),c=y({name:n,email:s,phone:i,message:p,ruc:E});if(c[0]){d(c[0]);return}const b=c[1];o.textContent="⏳ Enviando...",o.disabled=!0,fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(l=>{if(!l.ok)throw new Error("Error en la solicitud");return l.json()}).then(l=>{console.log(l),o.textContent="✅ Enviado",e.style.display="block",a.reset(),g()}).catch(l=>{console.error(l),d(["Error al enviar el formulario. Inténtalo de nuevo."])}).finally(()=>{o.removeAttribute("disabled")}),setTimeout(()=>{o.textContent="🚀 Enviar Solicitud",o.disabled=!1,e.style.display="none"},3e3)}function y(r){const{name:o,email:e,phone:t,message:n,ruc:s}=r,i=[];return(!o||o.trim()==="")&&i.push("El nombre es requerido"),!e||e.trim()===""?i.push("El correo electrónico es requerido"):u(e)||i.push("El correo electrónico no tiene un formato válido"),!t||t.trim()===""?i.push("El teléfono es requerido"):m(t)||i.push("El teléfono debe tener al menos 9 dígitos"),(!n||n.trim()==="")&&i.push("El mensaje es requerido"),!s||s.trim()===""?i.push("El DNI/RUC es requerido"):f(s)||i.push("El DNI/RUC debe tener 8 o 11 dígitos"),i.length>0?[i,null]:[null,{name:o.trim(),email:e.trim(),phone:t,message:n.trim(),ruc:s.trim()}]}function u(r){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)}function m(r){return/^\d{9,}$/.test(r)}function f(r){return/^\d{8}|^\d{11}$/.test(r)}function d(r){g();const o=document.getElementById("validationErrorsContainer");let e=document.getElementById("validationErrors");e||(e=document.createElement("div"),e.id="validationErrors",e.style.cssText=`
      background-color: #fee;
      border: 1px solid #fcc;
      color: #c33;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-size: 14px;
    `,a.insertBefore(e,o)),e.innerHTML=`
    <strong>Por favor corrige los siguientes errores:</strong>
    <ul style="margin: 5px 0 0 20px;">
      ${r.map(t=>`<li>${t}</li>`).join("")}
    </ul>
  `,C(r),e.scrollIntoView({behavior:"smooth",block:"nearest"})}function g(){const r=document.getElementById("validationErrors");r&&r.remove(),document.querySelectorAll(".form-input, .form-textarea").forEach(e=>{e.style.borderColor="var(--color-gray-5)"})}function C(r){const o={nombre:"name",correo:"email",teléfono:"phone",mensaje:"message",RUC:"ruc"};r.forEach(e=>{for(const[t,n]of Object.entries(o))if(e.toLowerCase().includes(t.toLowerCase())){const s=document.querySelector(`[name="${n}"]`);s&&(s.style.borderColor="var(--color-red)");break}})}const x=document.querySelectorAll(".form-input, .form-textarea");x.forEach(r=>{r.addEventListener("blur",o=>{const e=o.target,t=e.name,n=e.value.trim();if(e.style.borderColor="var(--color-gray-5)",e.hasAttribute("required")&&n===""){e.style.borderColor="var(--color-red)";return}switch(t){case"email":n&&!u(n)&&(e.style.borderColor="var(--color-red)");break;case"phone":n&&!m(n.replace(/\s/g,""))&&(e.style.borderColor="var(--color-red)");break;case"ruc":n&&!f(n)&&(e.style.borderColor="var(--color-red)");break}}),r.addEventListener("input",o=>{const e=o.target;e.value.trim()!==""&&(e.style.borderColor="var(--color-gray-5)")})});
