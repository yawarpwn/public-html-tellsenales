import{g as Jt}from"./_commonjsHelpers.CqkleIqs.js";var Kt="ais",on=function(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.descendantName,u=n.modifierName,c=r?"-".concat(r):"",f=u?"--".concat(u):"";return"".concat(Kt,"-").concat(e).concat(c).concat(f)}},Gt=0;function Zt(t){t.dependsOn==="recommend"&&(t.$$id=Gt++)}function fn(){}var Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},At=/[&<>"']/g,Yt=RegExp(At.source);function er(t){return t&&Yt.test(t)?t.replace(At,function(e){return Xt[e]}):t}var tr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qt=/&(amp|quot|lt|gt|#39);/g,rr=RegExp(Qt.source);function hn(t){return t&&rr.test(t)?t.replace(Qt,function(e){return tr[e]}):t}function qe(t){"@babel/helpers - typeof";return qe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(t)}function nr(t){return t===null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function ir(t){return qe(t)==="object"&&t!==null}function ar(t){if(!ir(t)||nr(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Y(t){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(t)}function sr(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function We(){return We=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},We.apply(this,arguments)}function Ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ke(Object(n),!0).forEach(function(r){Tt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tt(t,e,n){return e=cr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cr(t){var e=ur(t,"string");return Y(e)=="symbol"?e:String(e)}function ur(t,e){if(Y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ge={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},ae={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function or(t){return er(t).replace(new RegExp(Ge.highlightPreTag,"g"),ae.highlightPreTag).replace(new RegExp(Ge.highlightPostTag,"g"),ae.highlightPostTag)}function se(t){return ar(t)&&typeof t.value!="string"?Object.keys(t).reduce(function(e,n){return ne(ne({},e),{},Tt({},n,se(t[n])))},{}):Array.isArray(t)?t.map(se):ne(ne({},t),{},{value:or(t.value)})}function ln(t){return t.__escaped===void 0&&(t=t.map(function(e){var n=We({},(sr(e),e));return n._highlightResult&&(n._highlightResult=se(n._highlightResult)),n._snippetResult&&(n._snippetResult=se(n._snippetResult)),n}),t.__escaped=!0),t}function fr(t){return btoa(encodeURIComponent(JSON.stringify(t)))}function hr(t){return JSON.parse(decodeURIComponent(atob(t)))}function U(t){return t.$$type==="ais.index"}function lr(t){var e=t.name,n=t.connector,r=n===void 0?!1:n;return["https://www.algolia.com/doc/api-reference/widgets/",e,"/js/",r?"#connector":""].join("")}function dr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.map(function(u){return lr(u)}).join(", ");return function(u){return[u,"See documentation: ".concat(r)].filter(Boolean).join(`

`)}}function dn(t,e){for(var n,r=0;r<t.length;r++)if(n=t[r],e(n,r,t))return n}function mr(t,e){if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}function mn(t){var e=ae.highlightPostTag,n=ae.highlightPreTag,r=t.split(n),u=r.shift(),c=u?[{value:u,isHighlighted:!1}]:[];return r.forEach(function(f){var l=f.split(e);c.push({value:l[0],isHighlighted:!0}),l[1]!==""&&c.push({value:l[1],isHighlighted:!1})}),c}function vn(t,e){var n=Array.isArray(e)?e:e.split(".");return n.reduce(function(r,u){return r&&r[u]},t)}function Ze(t){return t!==Object(t)}function vr(t,e){if(t===e)return!0;if(Ze(t)||Ze(e)||typeof t=="function"||typeof e=="function")return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n=0,r=Object.keys(t);n<r.length;n++){var u=r[n];if(!(u in e)||!vr(t[u],e[u]))return!1}return!0}function gr(t){return t.filter(function(e,n,r){return r.indexOf(e)===n})}function ee(t){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(t)}var pr=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xe(Object(n),!0).forEach(function(r){Rr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rr(t,e,n){return e=yr(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yr(t){var e=Fr(t,"string");return ee(e)=="symbol"?e:String(e)}function Fr(t,e){if(ee(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ee(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pr(t,e){if(t==null)return{};var n=_r(t,e),r,u;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(u=0;u<c.length;u++)r=c[u],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _r(t,e){if(t==null)return{};var n={},r=Object.keys(t),u,c;for(c=0;c<r.length;c++)u=r[c],!(e.indexOf(u)>=0)&&(n[u]=t[u]);return n}var jr=function(e,n){n.facets,n.disjunctiveFacets,n.facetsRefinements,n.facetsExcludes,n.disjunctiveFacetsRefinements,n.numericRefinements,n.tagRefinements,n.hierarchicalFacets,n.hierarchicalFacetsRefinements,n.ruleContexts;var r=Pr(n,pr);return e.setQueryParameters(r)},br=function(e,n){return n.facets.reduce(function(r,u){return r.addFacet(u)},e)},Sr=function(e,n){return n.disjunctiveFacets.reduce(function(r,u){return r.addDisjunctiveFacet(u)},e)},xr=function(e,n){return e.setQueryParameters({hierarchicalFacets:n.hierarchicalFacets.reduce(function(r,u){var c=mr(r,function(l){return l.name===u.name});if(c===-1)return r.concat(u);var f=r.slice();return f.splice(c,1,u),f},e.hierarchicalFacets)})},Er=function(e,n){return n.tagRefinements.reduce(function(r,u){return r.addTagRefinement(u)},e)},Or=function(e,n){return e.setQueryParameters({facetsRefinements:$($({},e.facetsRefinements),n.facetsRefinements)})},Hr=function(e,n){return e.setQueryParameters({facetsExcludes:$($({},e.facetsExcludes),n.facetsExcludes)})},wr=function(e,n){return e.setQueryParameters({disjunctiveFacetsRefinements:$($({},e.disjunctiveFacetsRefinements),n.disjunctiveFacetsRefinements)})},Ar=function(e,n){return e.setQueryParameters({numericRefinements:$($({},e.numericRefinements),n.numericRefinements)})},Qr=function(e,n){return e.setQueryParameters({hierarchicalFacetsRefinements:$($({},e.hierarchicalFacetsRefinements),n.hierarchicalFacetsRefinements)})},Tr=function(e,n){var r=gr([].concat(e.ruleContexts).concat(n.ruleContexts).filter(Boolean));return r.length>0?e.setQueryParameters({ruleContexts:r}):e},Ir=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(function(u,c){var f=Qr(u,c),l=xr(f,c),p=Er(l,c),v=Ar(p,c),y=wr(v,c),x=Hr(y,c),o=Or(x,c),i=Sr(o,c),a=Tr(i,c),m=br(a,c);return jr(m,c)})};function ie(t,e,n){var r=e.getHelper();return{uiState:n,helper:r,parent:e,instantSearchInstance:t,state:r.state,renderState:t.renderState,templatesConfig:t.templatesConfig,createURL:e.createURL,scopedResults:[],searchMetadata:{isSearchStalled:t.status==="stalled"},status:t.status,error:t.error}}function Ye(t,e,n){var r=e.getResultsForWidget(n),u=e.getHelper();return{helper:u,parent:e,instantSearchInstance:t,results:r,scopedResults:e.getScopedResults(),state:r&&"_state"in r?r._state:u.state,renderState:t.renderState,templatesConfig:t.templatesConfig,createURL:e.createURL,searchMetadata:{isSearchStalled:t.status==="stalled"},status:t.status,error:t.error}}function Dr(t){for(var e=t.getParent(),n=[t.getHelper().state];e!==null;)n=[e.getHelper().state].concat(n),e=e.getParent();return n}function Be(t){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(t)}function gn(t){var e=t.getAttribute("data-insights-method"),n=t.getAttribute("data-insights-payload");if(typeof n!="string")throw new Error("The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.");try{var r=hr(n);return{method:e,payload:r}}catch{throw new Error("The insights helper was unable to parse `data-insights-payload`.")}}function Cr(t){var e=t.method,n=t.payload;if(Be(n)!=="object")throw new Error("The insights helper expects the payload to be an object.");var r;try{r=fr(n)}catch{throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(e,'" data-insights-payload="').concat(r,'"')}function pn(t,e){return Cr({method:t,payload:e})}var ue,et;function It(){if(et)return ue;et=1;function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}ue=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(c){if(!n(c)||c<0||isNaN(c))throw TypeError("n must be a positive number");return this._maxListeners=c,this},t.prototype.emit=function(c){var f,l,p,v,y,x;if(this._events||(this._events={}),c==="error"&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(f=arguments[1],f instanceof Error)throw f;var o=new Error('Uncaught, unspecified "error" event. ('+f+")");throw o.context=f,o}if(l=this._events[c],u(l))return!1;if(e(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:v=Array.prototype.slice.call(arguments,1),l.apply(this,v)}else if(r(l))for(v=Array.prototype.slice.call(arguments,1),x=l.slice(),p=x.length,y=0;y<p;y++)x[y].apply(this,v);return!0},t.prototype.addListener=function(c,f){var l;if(!e(f))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,e(f.listener)?f.listener:f),this._events[c]?r(this._events[c])?this._events[c].push(f):this._events[c]=[this._events[c],f]:this._events[c]=f,r(this._events[c])&&!this._events[c].warned&&(u(this._maxListeners)?l=t.defaultMaxListeners:l=this._maxListeners,l&&l>0&&this._events[c].length>l&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),typeof console.trace=="function"&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(c,f){if(!e(f))throw TypeError("listener must be a function");var l=!1;function p(){this.removeListener(c,p),l||(l=!0,f.apply(this,arguments))}return p.listener=f,this.on(c,p),this},t.prototype.removeListener=function(c,f){var l,p,v,y;if(!e(f))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;if(l=this._events[c],v=l.length,p=-1,l===f||e(l.listener)&&l.listener===f)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,f);else if(r(l)){for(y=v;y-- >0;)if(l[y]===f||l[y].listener&&l[y].listener===f){p=y;break}if(p<0)return this;l.length===1?(l.length=0,delete this._events[c]):l.splice(p,1),this._events.removeListener&&this.emit("removeListener",c,f)}return this},t.prototype.removeAllListeners=function(c){var f,l;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[c]&&delete this._events[c],this;if(arguments.length===0){for(f in this._events)f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events={},this}if(l=this._events[c],e(l))this.removeListener(c,l);else if(l)for(;l.length;)this.removeListener(c,l[l.length-1]);return delete this._events[c],this},t.prototype.listeners=function(c){var f;return!this._events||!this._events[c]?f=[]:e(this._events[c])?f=[this._events[c]]:f=this._events[c].slice(),f},t.prototype.listenerCount=function(c){if(this._events){var f=this._events[c];if(e(f))return 1;if(f)return f.length}return 0},t.listenerCount=function(c,f){return c.listenerCount(f)};function e(c){return typeof c=="function"}function n(c){return typeof c=="number"}function r(c){return typeof c=="object"&&c!==null}function u(c){return c===void 0}return ue}var oe,tt;function Dt(){if(tt)return oe;tt=1;function t(e,n){e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}return oe=t,oe}var fe,rt;function Nr(){if(rt)return fe;rt=1;var t=It(),e=Dt();function n(r,u,c){this.main=r,this.fn=u,this.recommendFn=c,this.lastResults=null,this.lastRecommendResults=null}return e(n,t),n.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},n.prototype.getModifiedState=function(r){return this.fn(r)},n.prototype.getModifiedRecommendState=function(r){return this.recommendFn(r)},fe=n,fe}var he,nt;function Le(){if(nt)return he;nt=1;function t(n){return typeof n!="string"?n:String(n).replace(/^-/,"\\-")}function e(n){return typeof n!="string"?n:n.replace(/^\\-/,"-")}return he={escapeFacetValue:t,unescapeFacetValue:e},he}var le,it;function Me(){if(it)return le;it=1;function t(u){return typeof u=="object"&&u!==null?n(Array.isArray(u)?[]:{},u):u}function e(u){return typeof u=="function"||Array.isArray(u)||Object.prototype.toString.call(u)==="[object Object]"}function n(u,c){if(u===c)return u;for(var f in c)if(!(!Object.prototype.hasOwnProperty.call(c,f)||f==="__proto__"||f==="constructor")){var l=c[f],p=u[f];typeof p<"u"&&typeof l>"u"||(e(p)&&e(l)?u[f]=n(p,l):u[f]=t(l))}return u}function r(u){e(u)||(u={});for(var c=1,f=arguments.length;c<f;c++){var l=arguments[c];e(l)&&n(u,l)}return u}return le=r,le}var de,at;function Ue(){if(at)return de;at=1;function t(e){return e&&Object.keys(e).length>0}return de=t,de}var me,st;function $e(){if(st)return me;st=1;function t(e,n){if(e===null)return{};var r={},u=Object.keys(e),c,f;for(f=0;f<u.length;f++)c=u[f],!(n.indexOf(c)>=0)&&(r[c]=e[c]);return r}return me=t,me}var ve,ct;function Ct(){if(ct)return ve;ct=1;function t(e){e=e||{},this.params=e.params||[]}return t.prototype={constructor:t,addParams:function(e){var n=this.params.slice();return n.push(e),new t({params:n})},removeParams:function(e){return new t({params:this.params.filter(function(n){return n.$$id!==e})})},addFrequentlyBoughtTogether:function(e){return this.addParams(Object.assign({},e,{model:"bought-together"}))},addRelatedProducts:function(e){return this.addParams(Object.assign({},e,{model:"related-products"}))},addTrendingItems:function(e){return this.addParams(Object.assign({},e,{model:"trending-items"}))},addTrendingFacets:function(e){return this.addParams(Object.assign({},e,{model:"trending-facets"}))},addLookingSimilar:function(e){return this.addParams(Object.assign({},e,{model:"looking-similar"}))},_buildQueries:function(e,n){return this.params.filter(function(r){return n[r.$$id]===void 0}).map(function(r){var u=Object.assign({},r,{indexName:e,threshold:r.threshold||0});return delete u.$$id,u})}},ve=t,ve}var ge,ut;function Nt(){if(ut)return ge;ut=1;function t(e,n){this._state=e,this._rawResults={};var r=this;e.params.forEach(function(u){var c=u.$$id;r[c]=n[c],r._rawResults[c]=n[c]})}return t.prototype={constructor:t},ge=t,ge}var pe,ot;function qr(){if(ot)return pe;ot=1;var t=Me();function e(r){return Object.keys(r).sort().reduce(function(u,c){return u[c]=r[c],u},{})}var n={_getQueries:function(u,c){var f=[];return f.push({indexName:u,params:n._getHitsSearchParams(c)}),c.getRefinedDisjunctiveFacets().forEach(function(l){f.push({indexName:u,params:n._getDisjunctiveFacetSearchParams(c,l)})}),c.getRefinedHierarchicalFacets().forEach(function(l){var p=c.getHierarchicalFacetByName(l),v=c.getHierarchicalRefinement(l),y=c._getHierarchicalFacetSeparator(p);if(v.length>0&&v[0].split(y).length>1){var x=v[0].split(y).slice(0,-1).reduce(function(i,a,m){return i.concat({attribute:p.attributes[m],value:m===0?a:[i[i.length-1].value,a].join(y)})},[]);x.forEach(function(o,i){var a=n._getDisjunctiveFacetSearchParams(c,o.attribute,i===0);function m(d){return p.attributes.some(function(_){return _===d.split(":")[0]})}var g=(a.facetFilters||[]).reduce(function(d,_){if(Array.isArray(_)){var S=_.filter(function(j){return!m(j)});S.length>0&&d.push(S)}return typeof _=="string"&&!m(_)&&d.push(_),d},[]),s=x[i-1];i>0?a.facetFilters=g.concat(s.attribute+":"+s.value):g.length>0?a.facetFilters=g:delete a.facetFilters,f.push({indexName:u,params:a})})}}),f},_getCompositionQueries:function(u){return[{compositionID:u.index,requestBody:{params:n._getCompositionHitsSearchParams(u)}}]},_getHitsSearchParams:function(r){var u=r.facets.concat(r.disjunctiveFacets).concat(n._getHitsHierarchicalFacetsAttributes(r)).sort(),c=n._getFacetFilters(r),f=n._getNumericFilters(r),l=n._getTagFilters(r),p={};return u.length>0&&(p.facets=u.indexOf("*")>-1?["*"]:u),l.length>0&&(p.tagFilters=l),c.length>0&&(p.facetFilters=c),f.length>0&&(p.numericFilters=f),e(t({},r.getQueryParams(),p))},_getCompositionHitsSearchParams:function(r){var u=r.facets.concat(r.disjunctiveFacets.map(function(y){return r.disjunctiveFacetsRefinements&&r.disjunctiveFacetsRefinements[y]&&r.disjunctiveFacetsRefinements[y].length>0?"disjunctive("+y+")":y})).concat(n._getHitsHierarchicalFacetsAttributes(r)).sort(),c=n._getFacetFilters(r),f=n._getNumericFilters(r),l=n._getTagFilters(r),p={};u.length>0&&(p.facets=u.indexOf("*")>-1?["*"]:u),l.length>0&&(p.tagFilters=l),c.length>0&&(p.facetFilters=c),f.length>0&&(p.numericFilters=f);var v=r.getQueryParams();return delete v.highlightPreTag,delete v.highlightPostTag,delete v.index,e(t({},v,p))},_getDisjunctiveFacetSearchParams:function(r,u,c){var f=n._getFacetFilters(r,u,c),l=n._getNumericFilters(r,u),p=n._getTagFilters(r),v={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};p.length>0&&(v.tagFilters=p);var y=r.getHierarchicalFacetByName(u);return y?v.facets=n._getDisjunctiveHierarchicalFacetAttribute(r,y,c):v.facets=u,l.length>0&&(v.numericFilters=l),f.length>0&&(v.facetFilters=f),e(t({},r.getQueryParams(),v))},_getNumericFilters:function(r,u){if(r.numericFilters)return r.numericFilters;var c=[];return Object.keys(r.numericRefinements).forEach(function(f){var l=r.numericRefinements[f]||{};Object.keys(l).forEach(function(p){var v=l[p]||[];u!==f&&v.forEach(function(y){if(Array.isArray(y)){var x=y.map(function(o){return f+p+o});c.push(x)}else c.push(f+p+y)})})}),c},_getTagFilters:function(r){return r.tagFilters?r.tagFilters:r.tagRefinements.join(",")},_getFacetFilters:function(r,u,c){var f=[],l=r.facetsRefinements||{};Object.keys(l).sort().forEach(function(x){var o=l[x]||[];o.slice().sort().forEach(function(i){f.push(x+":"+i)})});var p=r.facetsExcludes||{};Object.keys(p).sort().forEach(function(x){var o=p[x]||[];o.sort().forEach(function(i){f.push(x+":-"+i)})});var v=r.disjunctiveFacetsRefinements||{};Object.keys(v).sort().forEach(function(x){var o=v[x]||[];if(!(x===u||!o||o.length===0)){var i=[];o.slice().sort().forEach(function(a){i.push(x+":"+a)}),f.push(i)}});var y=r.hierarchicalFacetsRefinements||{};return Object.keys(y).sort().forEach(function(x){var o=y[x]||[],i=o[0];if(i!==void 0){var a=r.getHierarchicalFacetByName(x),m=r._getHierarchicalFacetSeparator(a),g=r._getHierarchicalRootPath(a),s,d;if(u===x){if(i.indexOf(m)===-1||!g&&c===!0||g&&g.split(m).length===i.split(m).length)return;g?(d=g.split(m).length-1,i=g):(d=i.split(m).length-2,i=i.slice(0,i.lastIndexOf(m))),s=a.attributes[d]}else d=i.split(m).length-1,s=a.attributes[d];s&&f.push([s+":"+i])}}),f},_getHitsHierarchicalFacetsAttributes:function(r){var u=[];return r.hierarchicalFacets.reduce(function(f,l){var p=r.getHierarchicalRefinement(l.name)[0];if(!p)return f.push(l.attributes[0]),f;var v=r._getHierarchicalFacetSeparator(l),y=p.split(v).length,x=l.attributes.slice(0,y+1);return f.concat(x)},u)},_getDisjunctiveHierarchicalFacetAttribute:function(r,u,c){var f=r._getHierarchicalFacetSeparator(u);if(c===!0){var l=r._getHierarchicalRootPath(u),p=0;return l&&(p=l.split(f).length),[u.attributes[p]]}var v=r.getHierarchicalRefinement(u.name)[0]||"",y=v.split(f).length-1;return u.attributes.slice(0,y+1)},getSearchForFacetQuery:function(r,u,c,f){var l=f.isDisjunctiveFacet(r)?f.clearRefinements(r):f,p={facetQuery:u,facetName:r};return typeof c=="number"&&(p.maxFacetHits=c),e(t({},n._getHitsSearchParams(l),p))}};return pe=n,pe}var Re,ft;function ke(){return ft||(ft=1,Re=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(n,r){return Object.keys(Object(r)).forEach(function(u){r[u]!==void 0&&(n[u]!==void 0&&delete n[u],n[u]=r[u])}),n},{})}),Re}var ye,ht;function re(){return ht||(ht=1,ye=function(e,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(n(e[r]))return e[r]}}),ye}var Fe,lt;function Wr(){if(lt)return Fe;lt=1;function t(e,n){return e.filter(function(r,u){return n.indexOf(r)>-1&&e.indexOf(r)===u})}return Fe=t,Fe}var Pe,dt;function Br(){if(dt)return Pe;dt=1;function t(e){if(typeof e=="number")return e;if(typeof e=="string")return parseFloat(e);if(Array.isArray(e))return e.map(t);throw new Error("The value should be a number, a parsable string or an array of those.")}return Pe=t,Pe}var _e,mt;function Vr(){return mt||(mt=1,_e=function(e){return e===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(e)}),_e}var je,vt;function Lr(){if(vt)return je;vt=1;var t=ke(),e=Ue(),n=$e(),r={addRefinement:function(c,f,l){if(r.isRefined(c,f,l))return c;var p=""+l,v=c[f]?c[f].concat(p):[p],y={};return y[f]=v,t(y,c)},removeRefinement:function(c,f,l){if(l===void 0)return r.clearRefinement(c,function(v,y){return f===y});var p=""+l;return r.clearRefinement(c,function(v,y){return f===y&&p===v})},toggleRefinement:function(c,f,l){if(l===void 0)throw new Error("toggleRefinement should be used with a value");return r.isRefined(c,f,l)?r.removeRefinement(c,f,l):r.addRefinement(c,f,l)},clearRefinement:function(c,f,l){if(f===void 0)return e(c)?{}:c;if(typeof f=="string")return n(c,[f]);if(typeof f=="function"){var p=!1,v=Object.keys(c).reduce(function(y,x){var o=c[x]||[],i=o.filter(function(a){return!f(a,x,l)});return i.length!==o.length&&(p=!0),y[x]=i,y},{});return p?v:c}},isRefined:function(c,f,l){var p=!!c[f]&&c[f].length>0;if(l===void 0||!p)return p;var v=""+l;return c[f].indexOf(v)!==-1}};return je=r,je}var be,gt;function qt(){if(gt)return be;gt=1;var t=ke(),e=re(),n=Wr(),r=Me(),u=Ue(),c=$e(),f=Br(),l=Vr(),p=Lr();function v(o,i){return Array.isArray(o)&&Array.isArray(i)?o.length===i.length&&o.every(function(a,m){return v(i[m],a)}):o===i}function y(o,i){return e(o,function(a){return v(a,i)})}function x(o){var i=o?x._parseNumbers(o):{};i.userToken!==void 0&&!l(i.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=i.facets||[],this.disjunctiveFacets=i.disjunctiveFacets||[],this.hierarchicalFacets=i.hierarchicalFacets||[],this.facetsRefinements=i.facetsRefinements||{},this.facetsExcludes=i.facetsExcludes||{},this.disjunctiveFacetsRefinements=i.disjunctiveFacetsRefinements||{},this.numericRefinements=i.numericRefinements||{},this.tagRefinements=i.tagRefinements||[],this.hierarchicalFacetsRefinements=i.hierarchicalFacetsRefinements||{};var a=this;Object.keys(i).forEach(function(m){var g=x.PARAMETERS.indexOf(m)!==-1,s=i[m]!==void 0;!g&&s&&(a[m]=i[m])})}return x.PARAMETERS=Object.keys(new x),x._parseNumbers=function(o){if(o instanceof x)return o;var i={},a=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(a.forEach(function(g){var s=o[g];if(typeof s=="string"){var d=parseFloat(s);i[g]=isNaN(d)?s:d}}),Array.isArray(o.insideBoundingBox)&&(i.insideBoundingBox=o.insideBoundingBox.map(function(g){return Array.isArray(g)?g.map(function(s){return parseFloat(s)}):g})),o.numericRefinements){var m={};Object.keys(o.numericRefinements).forEach(function(g){var s=o.numericRefinements[g]||{};m[g]={},Object.keys(s).forEach(function(d){var _=s[d],S=_.map(function(j){return Array.isArray(j)?j.map(function(O){return typeof O=="string"?parseFloat(O):O}):typeof j=="string"?parseFloat(j):j});m[g][d]=S})}),i.numericRefinements=m}return r(o,i)},x.make=function(i){var a=new x(i),m=i.hierarchicalFacets||[];return m.forEach(function(g){if(g.rootPath){var s=a.getHierarchicalRefinement(g.name);s.length>0&&s[0].indexOf(g.rootPath)!==0&&(a=a.clearRefinements(g.name)),s=a.getHierarchicalRefinement(g.name),s.length===0&&(a=a.toggleHierarchicalFacetRefinement(g.name,g.rootPath))}}),a},x.validate=function(o,i){var a=i||{};return o.tagFilters&&a.tagRefinements&&a.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):o.tagRefinements.length>0&&a.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):o.numericFilters&&a.numericRefinements&&u(a.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):u(o.numericRefinements)&&a.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},x.prototype={constructor:x,clearRefinements:function(i){var a={numericRefinements:this._clearNumericRefinements(i),facetsRefinements:p.clearRefinement(this.facetsRefinements,i,"conjunctiveFacet"),facetsExcludes:p.clearRefinement(this.facetsExcludes,i,"exclude"),disjunctiveFacetsRefinements:p.clearRefinement(this.disjunctiveFacetsRefinements,i,"disjunctiveFacet"),hierarchicalFacetsRefinements:p.clearRefinement(this.hierarchicalFacetsRefinements,i,"hierarchicalFacet")};return a.numericRefinements===this.numericRefinements&&a.facetsRefinements===this.facetsRefinements&&a.facetsExcludes===this.facetsExcludes&&a.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&a.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(a)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(i){return i===this.index?this:this.setQueryParameters({index:i})},setQuery:function(i){return i===this.query?this:this.setQueryParameters({query:i})},setPage:function(i){return i===this.page?this:this.setQueryParameters({page:i})},setFacets:function(i){return this.setQueryParameters({facets:i})},setDisjunctiveFacets:function(i){return this.setQueryParameters({disjunctiveFacets:i})},setHitsPerPage:function(i){return this.hitsPerPage===i?this:this.setQueryParameters({hitsPerPage:i})},setTypoTolerance:function(i){return this.typoTolerance===i?this:this.setQueryParameters({typoTolerance:i})},addNumericRefinement:function(o,i,a){var m=f(a);if(this.isNumericRefined(o,i,m))return this;var g=r({},this.numericRefinements);return g[o]=r({},g[o]),g[o][i]?(g[o][i]=g[o][i].slice(),g[o][i].push(m)):g[o][i]=[m],this.setQueryParameters({numericRefinements:g})},getConjunctiveRefinements:function(o){return this.isConjunctiveFacet(o)?this.facetsRefinements[o]||[]:[]},getDisjunctiveRefinements:function(o){return this.isDisjunctiveFacet(o)?this.disjunctiveFacetsRefinements[o]||[]:[]},getHierarchicalRefinement:function(o){return this.hierarchicalFacetsRefinements[o]||[]},getExcludeRefinements:function(o){return this.isConjunctiveFacet(o)?this.facetsExcludes[o]||[]:[]},removeNumericRefinement:function(o,i,a){var m=a;return m!==void 0?this.isNumericRefined(o,i,m)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(g,s){return s===o&&g.op===i&&v(g.val,f(m))})}):this:i!==void 0?this.isNumericRefined(o,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(g,s){return s===o&&g.op===i})}):this:this.isNumericRefined(o)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(g,s){return s===o})}):this},getNumericRefinements:function(o){return this.numericRefinements[o]||{}},getNumericRefinement:function(o,i){return this.numericRefinements[o]&&this.numericRefinements[o][i]},_clearNumericRefinements:function(i){if(i===void 0)return u(this.numericRefinements)?{}:this.numericRefinements;if(typeof i=="string")return c(this.numericRefinements,[i]);if(typeof i=="function"){var a=!1,m=this.numericRefinements,g=Object.keys(m).reduce(function(s,d){var _=m[d],S={};return _=_||{},Object.keys(_).forEach(function(j){var O=_[j]||[],E=[];O.forEach(function(h){var R=i({val:h,op:j},d,"numeric");R||E.push(h)}),E.length!==O.length&&(a=!0),S[j]=E}),s[d]=S,s},{});return a?g:this.numericRefinements}},addFacet:function(i){return this.isConjunctiveFacet(i)?this:this.setQueryParameters({facets:this.facets.concat([i])})},addDisjunctiveFacet:function(i){return this.isDisjunctiveFacet(i)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([i])})},addHierarchicalFacet:function(i){if(this.isHierarchicalFacet(i.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+i.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([i])})},addFacetRefinement:function(i,a){if(!this.isConjunctiveFacet(i))throw new Error(i+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsRefinements,i,a)?this:this.setQueryParameters({facetsRefinements:p.addRefinement(this.facetsRefinements,i,a)})},addExcludeRefinement:function(i,a){if(!this.isConjunctiveFacet(i))throw new Error(i+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsExcludes,i,a)?this:this.setQueryParameters({facetsExcludes:p.addRefinement(this.facetsExcludes,i,a)})},addDisjunctiveFacetRefinement:function(i,a){if(!this.isDisjunctiveFacet(i))throw new Error(i+" is not defined in the disjunctiveFacets attribute of the helper configuration");return p.isRefined(this.disjunctiveFacetsRefinements,i,a)?this:this.setQueryParameters({disjunctiveFacetsRefinements:p.addRefinement(this.disjunctiveFacetsRefinements,i,a)})},addTagRefinement:function(i){if(this.isTagRefined(i))return this;var a={tagRefinements:this.tagRefinements.concat(i)};return this.setQueryParameters(a)},removeFacet:function(i){return this.isConjunctiveFacet(i)?this.clearRefinements(i).setQueryParameters({facets:this.facets.filter(function(a){return a!==i})}):this},removeDisjunctiveFacet:function(i){return this.isDisjunctiveFacet(i)?this.clearRefinements(i).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(a){return a!==i})}):this},removeHierarchicalFacet:function(i){return this.isHierarchicalFacet(i)?this.clearRefinements(i).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(a){return a.name!==i})}):this},removeFacetRefinement:function(i,a){if(!this.isConjunctiveFacet(i))throw new Error(i+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsRefinements,i,a)?this.setQueryParameters({facetsRefinements:p.removeRefinement(this.facetsRefinements,i,a)}):this},removeExcludeRefinement:function(i,a){if(!this.isConjunctiveFacet(i))throw new Error(i+" is not defined in the facets attribute of the helper configuration");return p.isRefined(this.facetsExcludes,i,a)?this.setQueryParameters({facetsExcludes:p.removeRefinement(this.facetsExcludes,i,a)}):this},removeDisjunctiveFacetRefinement:function(i,a){if(!this.isDisjunctiveFacet(i))throw new Error(i+" is not defined in the disjunctiveFacets attribute of the helper configuration");return p.isRefined(this.disjunctiveFacetsRefinements,i,a)?this.setQueryParameters({disjunctiveFacetsRefinements:p.removeRefinement(this.disjunctiveFacetsRefinements,i,a)}):this},removeTagRefinement:function(i){if(!this.isTagRefined(i))return this;var a={tagRefinements:this.tagRefinements.filter(function(m){return m!==i})};return this.setQueryParameters(a)},toggleRefinement:function(i,a){return this.toggleFacetRefinement(i,a)},toggleFacetRefinement:function(i,a){if(this.isHierarchicalFacet(i))return this.toggleHierarchicalFacetRefinement(i,a);if(this.isConjunctiveFacet(i))return this.toggleConjunctiveFacetRefinement(i,a);if(this.isDisjunctiveFacet(i))return this.toggleDisjunctiveFacetRefinement(i,a);throw new Error("Cannot refine the undeclared facet "+i+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(i,a){if(!this.isConjunctiveFacet(i))throw new Error(i+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:p.toggleRefinement(this.facetsRefinements,i,a)})},toggleExcludeFacetRefinement:function(i,a){if(!this.isConjunctiveFacet(i))throw new Error(i+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:p.toggleRefinement(this.facetsExcludes,i,a)})},toggleDisjunctiveFacetRefinement:function(i,a){if(!this.isDisjunctiveFacet(i))throw new Error(i+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:p.toggleRefinement(this.disjunctiveFacetsRefinements,i,a)})},toggleHierarchicalFacetRefinement:function(i,a){if(!this.isHierarchicalFacet(i))throw new Error(i+" is not defined in the hierarchicalFacets attribute of the helper configuration");var m=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(i)),g={},s=this.hierarchicalFacetsRefinements[i]!==void 0&&this.hierarchicalFacetsRefinements[i].length>0&&(this.hierarchicalFacetsRefinements[i][0]===a||this.hierarchicalFacetsRefinements[i][0].indexOf(a+m)===0);return s?a.indexOf(m)===-1?g[i]=[]:g[i]=[a.slice(0,a.lastIndexOf(m))]:g[i]=[a],this.setQueryParameters({hierarchicalFacetsRefinements:t(g,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(o,i){if(this.isHierarchicalFacetRefined(o))throw new Error(o+" is already refined.");if(!this.isHierarchicalFacet(o))throw new Error(o+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var a={};return a[o]=[i],this.setQueryParameters({hierarchicalFacetsRefinements:t(a,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(o){if(!this.isHierarchicalFacetRefined(o))return this;var i={};return i[o]=[],this.setQueryParameters({hierarchicalFacetsRefinements:t(i,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(i){return this.isTagRefined(i)?this.removeTagRefinement(i):this.addTagRefinement(i)},isDisjunctiveFacet:function(o){return this.disjunctiveFacets.indexOf(o)>-1},isHierarchicalFacet:function(o){return this.getHierarchicalFacetByName(o)!==void 0},isConjunctiveFacet:function(o){return this.facets.indexOf(o)>-1},isFacetRefined:function(i,a){return this.isConjunctiveFacet(i)?p.isRefined(this.facetsRefinements,i,a):!1},isExcludeRefined:function(i,a){return this.isConjunctiveFacet(i)?p.isRefined(this.facetsExcludes,i,a):!1},isDisjunctiveFacetRefined:function(i,a){return this.isDisjunctiveFacet(i)?p.isRefined(this.disjunctiveFacetsRefinements,i,a):!1},isHierarchicalFacetRefined:function(i,a){if(!this.isHierarchicalFacet(i))return!1;var m=this.getHierarchicalRefinement(i);return a?m.indexOf(a)!==-1:m.length>0},isNumericRefined:function(i,a,m){if(m===void 0&&a===void 0)return!!this.numericRefinements[i];var g=this.numericRefinements[i]&&this.numericRefinements[i][a]!==void 0;if(m===void 0||!g)return g;var s=f(m),d=y(this.numericRefinements[i][a],s)!==void 0;return g&&d},isTagRefined:function(i){return this.tagRefinements.indexOf(i)!==-1},getRefinedDisjunctiveFacets:function(){var i=this,a=n(Object.keys(this.numericRefinements).filter(function(m){return Object.keys(i.numericRefinements[m]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(m){return i.disjunctiveFacetsRefinements[m].length>0}).concat(a).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var i=this;return n(this.hierarchicalFacets.map(function(a){return a.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(a){return i.hierarchicalFacetsRefinements[a].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var o=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(i){return o.indexOf(i)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var i=this.managedParameters,a={},m=this;return Object.keys(this).forEach(function(g){var s=m[g];i.indexOf(g)===-1&&s!==void 0&&(a[g]=s)}),a},setQueryParameter:function(i,a){if(this[i]===a)return this;var m={};return m[i]=a,this.setQueryParameters(m)},setQueryParameters:function(i){if(!i)return this;var a=x.validate(this,i);if(a)throw a;var m=this,g=x._parseNumbers(i),s=Object.keys(this).reduce(function(_,S){return _[S]=m[S],_},{}),d=Object.keys(g).reduce(function(_,S){var j=_[S]!==void 0,O=g[S]!==void 0;return j&&!O?c(_,[S]):(O&&(_[S]=g[S]),_)},s);return new this.constructor(d)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(o){return o.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(o){return o.separator||" > "},_getHierarchicalRootPath:function(o){return o.rootPath||null},_getHierarchicalShowParentLevel:function(o){return typeof o.showParentLevel=="boolean"?o.showParentLevel:!0},getHierarchicalFacetByName:function(o){return e(this.hierarchicalFacets,function(i){return i.name===o})},getHierarchicalFacetBreadcrumb:function(o){if(!this.isHierarchicalFacet(o))return[];var i=this.getHierarchicalRefinement(o)[0];if(!i)return[];var a=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(o)),m=i.split(a);return m.map(function(g){return g.trim()})},toString:function(){return JSON.stringify(this,null,2)}},be=x,be}var Se,pt;function Mr(){return pt||(pt=1,Se=function(e){return Array.isArray(e)?e.filter(Boolean):[]}),Se}var xe,Rt;function Ur(){return Rt||(Rt=1,xe=function(e,n){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(n(e[r]))return r;return-1}),xe}var Ee,yt;function Wt(){if(yt)return Ee;yt=1;var t=re();return Ee=function(n,r){var u=(r||[]).map(function(c){return c.split(":")});return n.reduce(function(f,l){var p=l.split(":"),v=t(u,function(y){return y[0]===p[0]});return p.length>1||!v?(f[0].push(p[0]),f[1].push(p[1]),f):(f[0].push(v[0]),f[1].push(v[1]),f)},[[],[]])},Ee}var Oe,Ft;function $r(){if(Ft)return Oe;Ft=1;function t(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(n,r){return Object.keys(Object(r)).forEach(function(u){var c=typeof n[u]=="number"?n[u]:0,f=r[u];f!==void 0&&f>=c&&(n[u]!==void 0&&delete n[u],n[u]=f)}),n},{})}return Oe=t,Oe}var He,Pt;function Bt(){if(Pt)return He;Pt=1;function t(n,r){if(n!==r){var u=n!==void 0,c=n===null,f=r!==void 0,l=r===null;if(!l&&n>r||c&&f||!u)return 1;if(!c&&n<r||l&&u||!f)return-1}return 0}function e(n,r,u){if(!Array.isArray(n))return[];Array.isArray(u)||(u=[]);var c=n.map(function(f,l){return{criteria:r.map(function(p){return f[p]}),index:l,value:f}});return c.sort(function(l,p){for(var v=-1;++v<l.criteria.length;){var y=t(l.criteria[v],p.criteria[v]);if(y)return v>=u.length?y:u[v]==="desc"?-y:y}return l.index-p.index}),c.map(function(f){return f.value})}return He=e,He}var we,_t;function kr(){if(_t)return we;_t=1,we=f;var t=Le(),e=re(),n=Wt(),r=Bt(),u=t.escapeFacetValue,c=t.unescapeFacetValue;function f(y){return function(o,i){var a=y.hierarchicalFacets[i],m=y.hierarchicalFacetsRefinements[a.name]&&y.hierarchicalFacetsRefinements[a.name][0]||"",g=y._getHierarchicalFacetSeparator(a),s=y._getHierarchicalRootPath(a),d=y._getHierarchicalShowParentLevel(a),_=n(y._getHierarchicalFacetSortBy(a)),S=o.every(function(E){return E.exhaustive}),j=l(_,g,s,d,m),O=o;return s&&(O=o.slice(s.split(g).length)),O.reduce(j,{name:y.hierarchicalFacets[i].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:S,data:null})}}function l(y,x,o,i,a){return function(g,s,d){var _=g;if(d>0){var S=0;for(_=g;S<d;){var j=_&&Array.isArray(_.data)?_.data:[];_=e(j,function(E){return E.isRefined}),S++}}if(_){var O=Object.keys(s.data).map(function(E){return[E,s.data[E]]}).filter(function(E){var h=E[0];return p(h,_.path||o,a,x,o,i)});_.data=r(O.map(function(E){var h=E[0],R=E[1];return v(R,h,x,c(a),s.exhaustive)}),y[0],y[1])}return g}}function p(y,x,o,i,a,m){return a&&(y.indexOf(a)!==0||a===y)?!1:!a&&y.indexOf(i)===-1||a&&y.split(i).length-a.split(i).length===1||y.indexOf(i)===-1&&o.indexOf(i)===-1||o.indexOf(y)===0||y.indexOf(x+i)===0&&(m||y.indexOf(o)===0)}function v(y,x,o,i,a){var m=x.split(o);return{name:m[m.length-1].trim(),path:x,escapedValue:u(x),count:y,isRefined:i===x||i.indexOf(x+o)===0,exhaustive:a,data:null}}return we}var Ae,jt;function Vt(){if(jt)return Ae;jt=1;var t=Mr(),e=ke(),n=Le(),r=re(),u=Ur(),c=Wt(),f=$r(),l=Bt(),p=n.escapeFacetValue,v=n.unescapeFacetValue,y=kr();function x(h){var R={};return h.forEach(function(P,F){R[P]=F}),R}function o(h,R,P){R&&R[P]&&(h.stats=R[P])}function i(h,R){return r(h,function(F){var b=F.attributes||[];return b.indexOf(R)>-1})}function a(h,R,P){var F=R[0]||{};this._rawResults=R;var b=this;Object.keys(F).forEach(function(H){b[H]=F[H]});var w=e(P,{persistHierarchicalRootCount:!1});Object.keys(w).forEach(function(H){b[H]=w[H]}),this.processingTimeMS=R.reduce(function(H,I){return I.processingTimeMS===void 0?H:H+I.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=h.hierarchicalFacets.map(function(){return[]}),this.facets=[];var A=h.getRefinedDisjunctiveFacets(),C=x(h.facets),T=x(h.disjunctiveFacets),D=1,Q=F.facets||{};Object.keys(Q).forEach(function(H){var I=Q[H],N=i(h.hierarchicalFacets,H);if(N){var B=N.attributes.indexOf(H),q=u(h.hierarchicalFacets,function(J){return J.name===N.name});b.hierarchicalFacets[q][B]={attribute:H,data:I,exhaustive:F.exhaustiveFacetsCount}}else{var z=h.disjunctiveFacets.indexOf(H)!==-1,W=h.facets.indexOf(H)!==-1,V;z&&(V=T[H],b.disjunctiveFacets[V]={name:H,data:I,exhaustive:F.exhaustiveFacetsCount},o(b.disjunctiveFacets[V],F.facets_stats,H)),W&&(V=C[H],b.facets[V]={name:H,data:I,exhaustive:F.exhaustiveFacetsCount},o(b.facets[V],F.facets_stats,H))}}),this.hierarchicalFacets=t(this.hierarchicalFacets),A.forEach(function(H){var I=R[D],N=I&&I.facets?I.facets:{},B=h.getHierarchicalFacetByName(H);Object.keys(N).forEach(function(q){var z=N[q],W;if(B){W=u(h.hierarchicalFacets,function(L){return L.name===B.name});var V=u(b.hierarchicalFacets[W],function(L){return L.attribute===q});if(V===-1)return;b.hierarchicalFacets[W][V].data=b.persistHierarchicalRootCount?f(b.hierarchicalFacets[W][V].data,z):e(z,b.hierarchicalFacets[W][V].data)}else{W=T[q];var J=F.facets&&F.facets[q]||{};b.disjunctiveFacets[W]={name:q,data:f(J,z),exhaustive:I.exhaustiveFacetsCount},o(b.disjunctiveFacets[W],I.facets_stats,q),h.disjunctiveFacetsRefinements[q]&&h.disjunctiveFacetsRefinements[q].forEach(function(L){!b.disjunctiveFacets[W].data[L]&&h.disjunctiveFacetsRefinements[q].indexOf(v(L))>-1&&(b.disjunctiveFacets[W].data[L]=0)})}}),D++}),h.getRefinedHierarchicalFacets().forEach(function(H){var I=h.getHierarchicalFacetByName(H),N=h._getHierarchicalFacetSeparator(I),B=h.getHierarchicalRefinement(H);B.length===0||B[0].split(N).length<2||R.slice(D).forEach(function(q){var z=q&&q.facets?q.facets:{};Object.keys(z).forEach(function(W){var V=z[W],J=u(h.hierarchicalFacets,function(ce){return ce.name===I.name}),L=u(b.hierarchicalFacets[J],function(ce){return ce.attribute===W});if(L!==-1){var ze={};if(B.length>0&&!b.persistHierarchicalRootCount){var Je=B[0].split(N)[0];ze[Je]=b.hierarchicalFacets[J][L].data[Je]}b.hierarchicalFacets[J][L].data=e(ze,V,b.hierarchicalFacets[J][L].data)}}),D++})}),Object.keys(h.facetsExcludes).forEach(function(H){var I=h.facetsExcludes[H],N=C[H];b.facets[N]={name:H,data:Q[H],exhaustive:F.exhaustiveFacetsCount},I.forEach(function(B){b.facets[N]=b.facets[N]||{name:H},b.facets[N].data=b.facets[N].data||{},b.facets[N].data[B]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(y(h)),this.facets=t(this.facets),this.disjunctiveFacets=t(this.disjunctiveFacets),this._state=h}a.prototype.getFacetByName=function(h){function R(P){return P.name===h}return r(this.facets,R)||r(this.disjunctiveFacets,R)||r(this.hierarchicalFacets,R)};function m(h,R){function P(Q){return Q.name===R}if(h._state.isConjunctiveFacet(R)){var F=r(h.facets,P);return F?Object.keys(F.data).map(function(Q){var H=p(Q);return{name:Q,escapedValue:H,count:F.data[Q],isRefined:h._state.isFacetRefined(R,H),isExcluded:h._state.isExcludeRefined(R,Q)}}):[]}else if(h._state.isDisjunctiveFacet(R)){var b=r(h.disjunctiveFacets,P);return b?Object.keys(b.data).map(function(Q){var H=p(Q);return{name:Q,escapedValue:H,count:b.data[Q],isRefined:h._state.isDisjunctiveFacetRefined(R,H)}}):[]}else if(h._state.isHierarchicalFacet(R)){var w=r(h.hierarchicalFacets,P);if(!w)return w;var A=h._state.getHierarchicalFacetByName(R),C=h._state._getHierarchicalFacetSeparator(A),T=v(h._state.getHierarchicalRefinement(R)[0]||"");T.indexOf(A.rootPath)===0&&(T=T.replace(A.rootPath+C,""));var D=T.split(C);return D.unshift(R),g(w,D,0),w}}function g(h,R,P){h.isRefined=h.name===(R[P]&&R[P].trim()),h.data&&h.data.forEach(function(F){g(F,R,P+1)})}function s(h,R,P,F){if(F=F||0,Array.isArray(R))return h(R,P[F]);if(!R.data||R.data.length===0)return R;var b=R.data.map(function(C){return s(h,C,P,F+1)}),w=h(b,P[F]),A=e({data:w},R);return A}a.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function d(h,R){return R.sort(h)}function _(h,R){var P=[],F=[],b=R.hide||[],w=R.order||[],A=w.reduce(function(D,Q,H){return D[Q]=H,D},{});h.forEach(function(D){var Q=D.path||D.name,H=b.indexOf(Q)>-1;!H&&A[Q]!==void 0?P[A[Q]]=D:H||F.push(D)}),P=P.filter(function(D){return D});var C=R.sortRemainingBy,T;return C==="hidden"?P:(C==="alpha"?T=[["path","name"],["asc","asc"]]:T=[["count"],["desc"]],P.concat(l(F,T[0],T[1])))}function S(h,R){return h.renderingContent&&h.renderingContent.facetOrdering&&h.renderingContent.facetOrdering.values&&h.renderingContent.facetOrdering.values[R]}a.prototype.getFacetValues=function(h,R){var P=m(this,h);if(P){var F=e(R,{sortBy:a.DEFAULT_SORT,facetOrdering:!(R&&R.sortBy)}),b=this,w;if(Array.isArray(P))w=[h];else{var A=b._state.getHierarchicalFacetByName(P.name);w=A.attributes}return s(function(C,T){if(F.facetOrdering){var D=S(b,T);if(D)return _(C,D)}if(Array.isArray(F.sortBy)){var Q=c(F.sortBy,a.DEFAULT_SORT);return l(C,Q[0],Q[1])}else if(typeof F.sortBy=="function")return d(F.sortBy,C);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},P,w)}},a.prototype.getFacetStats=function(h){if(this._state.isConjunctiveFacet(h))return j(this.facets,h);if(this._state.isDisjunctiveFacet(h))return j(this.disjunctiveFacets,h)};function j(h,R){var P=r(h,function(F){return F.name===R});return P&&P.stats}a.prototype.getRefinements=function(){var h=this._state,R=this,P=[];return Object.keys(h.facetsRefinements).forEach(function(F){h.facetsRefinements[F].forEach(function(b){P.push(O(h,"facet",F,b,R.facets))})}),Object.keys(h.facetsExcludes).forEach(function(F){h.facetsExcludes[F].forEach(function(b){P.push(O(h,"exclude",F,b,R.facets))})}),Object.keys(h.disjunctiveFacetsRefinements).forEach(function(F){h.disjunctiveFacetsRefinements[F].forEach(function(b){P.push(O(h,"disjunctive",F,b,R.disjunctiveFacets))})}),Object.keys(h.hierarchicalFacetsRefinements).forEach(function(F){h.hierarchicalFacetsRefinements[F].forEach(function(b){P.push(E(h,F,b,R.hierarchicalFacets))})}),Object.keys(h.numericRefinements).forEach(function(F){var b=h.numericRefinements[F];Object.keys(b).forEach(function(w){b[w].forEach(function(A){P.push({type:"numeric",attributeName:F,name:A,numericValue:A,operator:w})})})}),h.tagRefinements.forEach(function(F){P.push({type:"tag",attributeName:"_tags",name:F})}),P};function O(h,R,P,F,b){var w=r(b,function(T){return T.name===P}),A=w&&w.data&&w.data[F]?w.data[F]:0,C=w&&w.exhaustive||!1;return{type:R,attributeName:P,name:F,count:A,exhaustive:C}}function E(h,R,P,F){var b=h.getHierarchicalFacetByName(R),w=h._getHierarchicalFacetSeparator(b),A=P.split(w),C=r(F,function(I){return I.name===R}),T=A.reduce(function(I,N){var B=I&&r(I.data,function(q){return q.name===N});return B!==void 0?B:I},C),D=T&&T.count||0,Q=T&&T.exhaustive||!1,H=T&&T.path||"";return{type:"hierarchical",attributeName:R,name:H,count:D,exhaustive:Q}}return Ae=a,Ae}var Qe,bt;function zr(){return bt||(bt=1,Qe=function(e){return e.reduce(function(n,r){return n.concat(r)},[])}),Qe}var Te,St;function Jr(){if(St)return Te;St=1;var t=re(),e=zr();function n(u,c){var f=[];return Object.keys(u).forEach(function(l){u[l].count<2&&(u[l].indexSum+=100),f.push({objectID:l,avgOfIndices:u[l].indexSum/c})}),f.sort(function(l,p){return l.avgOfIndices>p.avgOfIndices?1:-1})}function r(u){var c={};u.forEach(function(p){p.forEach(function(v,y){c[v.objectID]?c[v.objectID]={indexSum:c[v.objectID].indexSum+y,count:c[v.objectID].count+1}:c[v.objectID]={indexSum:y,count:1}})});var f=n(c,u.length),l=f.reduce(function(p,v){var y=t(e(u),function(x){return x.objectID===v.objectID});return y?p.concat(y):p},[]);return l}return Te=r,Te}var Ie,xt;function Lt(){return xt||(xt=1,Ie="3.24.3"),Ie}var De,Et;function Kr(){if(Et)return De;Et=1;var t=It(),e=Nr(),n=Le().escapeFacetValue,r=Dt(),u=Me(),c=Ue(),f=$e(),l=Ct(),p=Nt(),v=qr(),y=qt(),x=Vt(),o=Jr(),i=Lt();function a(s,d,_,S){typeof s.addAlgoliaAgent=="function"&&s.addAlgoliaAgent("JS Helper ("+i+")"),this.setClient(s);var j=_||{};j.index=d,this.state=y.make(j),this.recommendState=new l({params:j.recommendState}),this.lastResults=null,this.lastRecommendResults=null,this._queryId=0,this._recommendQueryId=0,this._lastQueryIdReceived=-1,this._lastRecommendQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._currentNbRecommendQueries=0,this._searchResultsOptions=S,this._recommendCache={}}r(a,t),a.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},a.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},a.prototype.searchWithComposition=function(){return this._runComposition({onlyWithDerivedHelpers:!0}),this},a.prototype.recommend=function(){return this._recommend(),this},a.prototype.getQuery=function(){var s=this.state;return v._getHitsSearchParams(s)},a.prototype.searchOnce=function(s,d){var _=s?this.state.setQueryParameters(s):this.state,S=v._getQueries(_.index,_),j=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:_}),d){this.client.search(S).then(function(O){j._currentNbQueries--,j._currentNbQueries===0&&j.emit("searchQueueEmpty"),d(null,new x(_,O.results),_)}).catch(function(O){j._currentNbQueries--,j._currentNbQueries===0&&j.emit("searchQueueEmpty"),d(O,null,_)});return}return this.client.search(S).then(function(O){return j._currentNbQueries--,j._currentNbQueries===0&&j.emit("searchQueueEmpty"),{content:new x(_,O.results),state:_,_originalResponse:O}},function(O){throw j._currentNbQueries--,j._currentNbQueries===0&&j.emit("searchQueueEmpty"),O})},a.prototype.findAnswers=function(s){console.warn("[algoliasearch-helper] answers is no longer supported");var d=this.state,_=this.derivedHelpers[0];if(!_)return Promise.resolve([]);var S=_.getModifiedState(d),j=u({attributesForPrediction:s.attributesForPrediction,nbHits:s.nbHits},{params:f(v._getHitsSearchParams(S),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),O="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(O);var E=this.client.initIndex(S.index);if(typeof E.findAnswers!="function")throw new Error(O);return E.findAnswers(S.query,s.queryLanguages,j)},a.prototype.searchForFacetValues=function(s,d,_,S){var j=typeof this.client.searchForFacetValues=="function"&&typeof this.client.searchForFacets!="function",O=typeof this.client.initIndex=="function";if(!j&&!O&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var E=this.state.setQueryParameters(S||{}),h=E.isDisjunctiveFacet(s),R=v.getSearchForFacetQuery(s,d,_,E);this._currentNbQueries++;var P=this,F;return j?F=this.client.searchForFacetValues([{indexName:E.index,params:R}]):O?F=this.client.initIndex(E.index).searchForFacetValues(R):(delete R.facetName,F=this.client.search([{type:"facet",facet:s,indexName:E.index,params:R}]).then(function(w){return w.results[0]})),this.emit("searchForFacetValues",{state:E,facet:s,query:d}),F.then(function(w){return P._currentNbQueries--,P._currentNbQueries===0&&P.emit("searchQueueEmpty"),w=Array.isArray(w)?w[0]:w,w.facetHits.forEach(function(A){A.escapedValue=n(A.value),A.isRefined=h?E.isDisjunctiveFacetRefined(s,A.escapedValue):E.isFacetRefined(s,A.escapedValue)}),w},function(b){throw P._currentNbQueries--,P._currentNbQueries===0&&P.emit("searchQueueEmpty"),b})},a.prototype.searchForCompositionFacetValues=function(s,d,_,S){if(typeof this.client.searchForFacetValues!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues");var j=this.state.setQueryParameters(S||{}),O=j.isDisjunctiveFacet(s);this._currentNbQueries++;var E=this,h;return h=this.client.searchForFacetValues({compositionID:j.index,facetName:s,searchForFacetValuesRequest:{params:{query:d,maxFacetHits:_,searchQuery:v._getCompositionHitsSearchParams(j)}}}),this.emit("searchForFacetValues",{state:j,facet:s,query:d}),h.then(function(P){return E._currentNbQueries--,E._currentNbQueries===0&&E.emit("searchQueueEmpty"),P=P.results[0],P.facetHits.forEach(function(F){F.escapedValue=n(F.value),F.isRefined=O?j.isDisjunctiveFacetRefined(s,F.escapedValue):j.isFacetRefined(s,F.escapedValue)}),P},function(R){throw E._currentNbQueries--,E._currentNbQueries===0&&E.emit("searchQueueEmpty"),R})},a.prototype.setQuery=function(s){return this._change({state:this.state.resetPage().setQuery(s),isPageReset:!0}),this},a.prototype.clearRefinements=function(s){return this._change({state:this.state.resetPage().clearRefinements(s),isPageReset:!0}),this},a.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},a.prototype.addDisjunctiveFacetRefinement=function(s,d){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},a.prototype.addHierarchicalFacetRefinement=function(s,d){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.addNumericRefinement=function(s,d,_){return this._change({state:this.state.resetPage().addNumericRefinement(s,d,_),isPageReset:!0}),this},a.prototype.addFacetRefinement=function(s,d){return this._change({state:this.state.resetPage().addFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},a.prototype.addFacetExclusion=function(s,d){return this._change({state:this.state.resetPage().addExcludeRefinement(s,d),isPageReset:!0}),this},a.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},a.prototype.addTag=function(s){return this._change({state:this.state.resetPage().addTagRefinement(s),isPageReset:!0}),this},a.prototype.addFrequentlyBoughtTogether=function(s){return this._recommendChange({state:this.recommendState.addFrequentlyBoughtTogether(s)}),this},a.prototype.addRelatedProducts=function(s){return this._recommendChange({state:this.recommendState.addRelatedProducts(s)}),this},a.prototype.addTrendingItems=function(s){return this._recommendChange({state:this.recommendState.addTrendingItems(s)}),this},a.prototype.addTrendingFacets=function(s){return this._recommendChange({state:this.recommendState.addTrendingFacets(s)}),this},a.prototype.addLookingSimilar=function(s){return this._recommendChange({state:this.recommendState.addLookingSimilar(s)}),this},a.prototype.removeNumericRefinement=function(s,d,_){return this._change({state:this.state.resetPage().removeNumericRefinement(s,d,_),isPageReset:!0}),this},a.prototype.removeDisjunctiveFacetRefinement=function(s,d){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},a.prototype.removeHierarchicalFacetRefinement=function(s){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(s),isPageReset:!0}),this},a.prototype.removeFacetRefinement=function(s,d){return this._change({state:this.state.resetPage().removeFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},a.prototype.removeFacetExclusion=function(s,d){return this._change({state:this.state.resetPage().removeExcludeRefinement(s,d),isPageReset:!0}),this},a.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},a.prototype.removeTag=function(s){return this._change({state:this.state.resetPage().removeTagRefinement(s),isPageReset:!0}),this},a.prototype.removeFrequentlyBoughtTogether=function(s){return this._recommendChange({state:this.recommendState.removeParams(s)}),this},a.prototype.removeRelatedProducts=function(s){return this._recommendChange({state:this.recommendState.removeParams(s)}),this},a.prototype.removeTrendingItems=function(s){return this._recommendChange({state:this.recommendState.removeParams(s)}),this},a.prototype.removeTrendingFacets=function(s){return this._recommendChange({state:this.recommendState.removeParams(s)}),this},a.prototype.removeLookingSimilar=function(s){return this._recommendChange({state:this.recommendState.removeParams(s)}),this},a.prototype.toggleFacetExclusion=function(s,d){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},a.prototype.toggleRefinement=function(s,d){return this.toggleFacetRefinement(s,d)},a.prototype.toggleFacetRefinement=function(s,d){return this._change({state:this.state.resetPage().toggleFacetRefinement(s,d),isPageReset:!0}),this},a.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},a.prototype.toggleTag=function(s){return this._change({state:this.state.resetPage().toggleTagRefinement(s),isPageReset:!0}),this},a.prototype.nextPage=function(){var s=this.state.page||0;return this.setPage(s+1)},a.prototype.previousPage=function(){var s=this.state.page||0;return this.setPage(s-1)};function m(s){if(s<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(s),isPageReset:!1}),this}a.prototype.setCurrentPage=m,a.prototype.setPage=m,a.prototype.setIndex=function(s){return this._change({state:this.state.resetPage().setIndex(s),isPageReset:!0}),this},a.prototype.setQueryParameter=function(s,d){return this._change({state:this.state.resetPage().setQueryParameter(s,d),isPageReset:!0}),this},a.prototype.setState=function(s){return this._change({state:y.make(s),isPageReset:!1}),this},a.prototype.overrideStateWithoutTriggeringChangeEvent=function(s){return this.state=new y(s),this},a.prototype.hasRefinements=function(s){return c(this.state.getNumericRefinements(s))?!0:this.state.isConjunctiveFacet(s)?this.state.isFacetRefined(s):this.state.isDisjunctiveFacet(s)?this.state.isDisjunctiveFacetRefined(s):this.state.isHierarchicalFacet(s)?this.state.isHierarchicalFacetRefined(s):!1},a.prototype.isExcluded=function(s,d){return this.state.isExcludeRefined(s,d)},a.prototype.isDisjunctiveRefined=function(s,d){return this.state.isDisjunctiveFacetRefined(s,d)},a.prototype.hasTag=function(s){return this.state.isTagRefined(s)},a.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},a.prototype.getIndex=function(){return this.state.index};function g(){return this.state.page}return a.prototype.getCurrentPage=g,a.prototype.getPage=g,a.prototype.getTags=function(){return this.state.tagRefinements},a.prototype.getRefinements=function(s){var d=[];if(this.state.isConjunctiveFacet(s)){var _=this.state.getConjunctiveRefinements(s);_.forEach(function(E){d.push({value:E,type:"conjunctive"})});var S=this.state.getExcludeRefinements(s);S.forEach(function(E){d.push({value:E,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(s)){var j=this.state.getDisjunctiveRefinements(s);j.forEach(function(E){d.push({value:E,type:"disjunctive"})})}var O=this.state.getNumericRefinements(s);return Object.keys(O).forEach(function(E){var h=O[E];d.push({value:h,operator:E,type:"numeric"})}),d},a.prototype.getNumericRefinement=function(s,d){return this.state.getNumericRefinement(s,d)},a.prototype.getHierarchicalFacetBreadcrumb=function(s){return this.state.getHierarchicalFacetBreadcrumb(s)},a.prototype._search=function(s){var d=this.state,_=[],S=[];s.onlyWithDerivedHelpers||(S=v._getQueries(d.index,d),_.push({state:d,queriesCount:S.length,helper:this}),this.emit("search",{state:d,results:this.lastResults}));var j=this.derivedHelpers.map(function(h){var R=h.getModifiedState(d),P=R.index?v._getQueries(R.index,R):[];return _.push({state:R,queriesCount:P.length,helper:h}),h.emit("search",{state:R,results:h.lastResults}),P}),O=Array.prototype.concat.apply(S,j),E=this._queryId++;if(this._currentNbQueries++,!O.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,_,E));try{this.client.search(O).then(this._dispatchAlgoliaResponse.bind(this,_,E)).catch(this._dispatchAlgoliaError.bind(this,E))}catch(h){this.emit("error",{error:h})}},a.prototype._runComposition=function(){var s=this.state,d=[],_=[],S=this.derivedHelpers.map(function(h){var R=h.getModifiedState(s),P=v._getCompositionQueries(R);return d.push({state:R,queriesCount:P.length,helper:h}),h.emit("search",{state:R,results:h.lastResults}),P}),j=Array.prototype.concat.apply(_,S),O=this._queryId++;if(this._currentNbQueries++,!j.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,d,O));if(j.length>1)throw new Error("Only one query is allowed when using a composition.");var E=j[0];try{this.client.search(E).then(this._dispatchAlgoliaResponse.bind(this,d,O)).catch(this._dispatchAlgoliaError.bind(this,O))}catch(h){this.emit("error",{error:h})}},a.prototype._recommend=function(){var s=this.state,d=this.recommendState,_=this.getIndex(),S=[{state:d,index:_,helper:this}],j=d.params.map(function(P){return P.$$id});this.emit("fetch",{recommend:{state:d,results:this.lastRecommendResults}});var O=this._recommendCache,E=this.derivedHelpers.map(function(P){var F=P.getModifiedState(s).index;if(!F)return[];var b=P.getModifiedRecommendState(new l);return S.push({state:b,index:F,helper:P}),j=Array.prototype.concat.apply(j,b.params.map(function(w){return w.$$id})),P.emit("fetch",{recommend:{state:b,results:P.lastRecommendResults}}),b._buildQueries(F,O)}),h=Array.prototype.concat.apply(this.recommendState._buildQueries(_,O),E);if(h.length!==0){if(h.length>0&&typeof this.client.getRecommendations>"u"){console.warn("Please update algoliasearch/lite to the latest version in order to use recommend widgets.");return}var R=this._recommendQueryId++;this._currentNbRecommendQueries++;try{this.client.getRecommendations(h).then(this._dispatchRecommendResponse.bind(this,R,S,j)).catch(this._dispatchRecommendError.bind(this,R))}catch(P){this.emit("error",{error:P})}}},a.prototype._dispatchAlgoliaResponse=function(s,d,_){var S=this;if(!(d<this._lastQueryIdReceived)){this._currentNbQueries-=d-this._lastQueryIdReceived,this._lastQueryIdReceived=d,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var j=_.results.slice(),O=Object.keys(_).reduce(function(E,h){return h!=="results"&&(E[h]=_[h]),E},{});Object.keys(O).length<=0&&(O=void 0),s.forEach(function(E){var h=E.state,R=E.queriesCount,P=E.helper,F=j.splice(0,R);if(!h.index){P.emit("result",{results:null,state:h});return}P.lastResults=new x(h,F,S._searchResultsOptions),O!==void 0&&(P.lastResults._rawContent=O),P.emit("result",{results:P.lastResults,state:h})})}},a.prototype._dispatchRecommendResponse=function(s,d,_,S){if(!(s<this._lastRecommendQueryIdReceived)){this._currentNbRecommendQueries-=s-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=s,this._currentNbRecommendQueries===0&&this.emit("recommendQueueEmpty");var j=this._recommendCache,O={};_.filter(function(h){return j[h]===void 0}).forEach(function(h,R){O[h]||(O[h]=[]),O[h].push(R)}),Object.keys(O).forEach(function(h){var R=O[h],P=S.results[R[0]];if(R.length===1){j[h]=P;return}j[h]=Object.assign({},P,{hits:o(R.map(function(F){return S.results[F].hits}))})});var E={};_.forEach(function(h){E[h]=j[h]}),d.forEach(function(h){var R=h.state,P=h.helper;if(!h.index){P.emit("recommend:result",{results:null,state:R});return}P.lastRecommendResults=new p(R,E),P.emit("recommend:result",{recommend:{results:P.lastRecommendResults,state:R}})})}},a.prototype._dispatchAlgoliaError=function(s,d){s<this._lastQueryIdReceived||(this._currentNbQueries-=s-this._lastQueryIdReceived,this._lastQueryIdReceived=s,this.emit("error",{error:d}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))},a.prototype._dispatchRecommendError=function(s,d){s<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=s-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=s,this.emit("error",{error:d}),this._currentNbRecommendQueries===0&&this.emit("recommendQueueEmpty"))},a.prototype.containsRefinement=function(s,d,_,S){return s||d.length!==0||_.length!==0||S.length!==0},a.prototype._hasDisjunctiveRefinements=function(s){return this.state.disjunctiveRefinements[s]&&this.state.disjunctiveRefinements[s].length>0},a.prototype._change=function(s){var d=s.state,_=s.isPageReset;d!==this.state&&(this.state=d,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:_}))},a.prototype._recommendChange=function(s){var d=s.state;d!==this.recommendState&&(this.recommendState=d,this.emit("recommend:change",{search:{results:this.lastResults,state:this.state},recommend:{results:this.lastRecommendResults,state:this.recommendState}}))},a.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},a.prototype.setClient=function(s){return this.client===s?this:(typeof s.addAlgoliaAgent=="function"&&s.addAlgoliaAgent("JS Helper ("+i+")"),this.client=s,this)},a.prototype.getClient=function(){return this.client},a.prototype.derive=function(s,d){var _=new e(this,s,d);return this.derivedHelpers.push(_),_},a.prototype.detachDerivedHelper=function(s){var d=this.derivedHelpers.indexOf(s);if(d===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(d,1)},a.prototype.hasPendingRequests=function(){return this._currentNbQueries>0},De=a,De}var Ce,Ot;function Gr(){if(Ot)return Ce;Ot=1;var t=Kr(),e=Ct(),n=Nt(),r=qt(),u=Vt();function c(f,l,p,v){return new t(f,l,p,v)}return c.version=Lt(),c.AlgoliaSearchHelper=t,c.SearchParameters=r,c.RecommendParameters=e,c.SearchResults=u,c.RecommendResults=n,Ce=c,Ce}var Zr=Gr();const k=Jt(Zr);function te(t){"@babel/helpers - typeof";return te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(t)}var Xr=["initialSearchParameters"],Yr=["initialRecommendParameters"];function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(n),!0).forEach(function(r){K(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K(t,e,n){return e=en(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function en(t){var e=tn(t,"string");return te(e)=="symbol"?e:String(e)}function tn(t,e){if(te(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(te(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mt(t){return sn(t)||an(t)||nn(t)||rn()}function rn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nn(t,e){if(t){if(typeof t=="string")return Ve(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(t,e)}}function an(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sn(t){if(Array.isArray(t))return Ve(t)}function Ve(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ut(t,e){if(t==null)return{};var n=cn(t,e),r,u;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(u=0;u<c.length;u++)r=c[u],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cn(t,e){if(t==null)return{};var n={},r=Object.keys(t),u,c;for(c=0;c<r.length;c++)u=r[c],!(e.indexOf(u)>=0)&&(n[u]=t[u]);return n}var G=dr({name:"index-widget"});function $t(t,e){var n=e.state,r=e.recommendState,u=e.isPageReset,c=e._uiState;n!==t.state&&(t.state=n,t.emit("change",{state:t.state,results:t.lastResults,isPageReset:u,_uiState:c})),r!==t.recommendState&&(t.recommendState=r)}function Z(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.reduce(function(r,u){return U(u)||!u.getWidgetUiState&&!u.getWidgetState?r:u.getWidgetUiState?u.getWidgetUiState(r,e):u.getWidgetState(r,e)},n)}function X(t,e){var n=e.initialSearchParameters,r=Ut(e,Xr);return t.reduce(function(u,c){return!c.getWidgetSearchParameters||U(c)?u:c.dependsOn==="search"&&c.getWidgetParameters?c.getWidgetParameters(u,r):c.getWidgetSearchParameters(u,r)},n)}function wt(t,e){var n=e.initialRecommendParameters,r=Ut(e,Yr);return t.reduce(function(u,c){return!U(c)&&c.dependsOn==="recommend"&&c.getWidgetParameters?c.getWidgetParameters(u,r):u},n)}function kt(t){var e=t.filter(U);e.length!==0&&e.forEach(function(n){var r=n.getHelper();$t(r,{state:r.state.resetPage(),recommendState:r.recommendState,isPageReset:!0}),kt(n.getWidgets())})}function zt(t){var e=t.filter(U);return e.reduce(function(n,r){return n.concat.apply(n,[{indexId:r.getIndexId(),results:r.getResults(),helper:r.getHelper()}].concat(Mt(zt(r.getWidgets()))))},[])}var Rn=function(e){if(e===void 0||e.indexName===void 0)throw new Error(G("The `indexName` option is required."));var n=e.indexName,r=e.indexId,u=r===void 0?n:r,c=[],f={},l=null,p=null,v=null,y=null,x=null,o=!1,i=!1;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return n},getIndexId:function(){return u},getHelper:function(){return v},getResults:function(){var m;return(m=y)!==null&&m!==void 0&&m.lastResults?(y.lastResults._state=v.state,y.lastResults):null},getResultsForWidget:function(m){var g;return m.dependsOn!=="recommend"||U(m)||m.$$id===void 0?this.getResults():(g=v)!==null&&g!==void 0&&g.lastRecommendResults?v.lastRecommendResults[m.$$id]:null},getPreviousState:function(){return x},getScopedResults:function(){var m=this.getParent(),g;return m?g=m.getWidgets():n.length===0?g=this.getWidgets():g=[this],zt(g)},getParent:function(){return p},createURL:function(m){return typeof m=="function"?l._createURL(K({},u,m(f))):l._createURL(K({},u,Z(c,{searchParameters:m,helper:v})))},getWidgets:function(){return c},addWidgets:function(m){var g=this;if(!Array.isArray(m))throw new Error(G("The `addWidgets` method expects an array of widgets."));if(m.some(function(s){return typeof s.init!="function"&&typeof s.render!="function"}))throw new Error(G("The widget definition expects a `render` and/or an `init` method."));return m.forEach(function(s){U(s)||(l&&s.dependsOn==="recommend"?l._hasRecommendWidget=!0:l?l._hasSearchWidget=!0:s.dependsOn==="recommend"?o=!0:i=!0,Zt(s))}),c=c.concat(m),l&&m.length&&($t(v,{state:X(c,{uiState:f,initialSearchParameters:v.state}),recommendState:wt(c,{uiState:f,initialRecommendParameters:v.recommendState}),_uiState:f}),m.forEach(function(s){if(s.getRenderState){var d=s.getRenderState(l.renderState[g.getIndexId()]||{},ie(l,g,l._initialUiState));Ne({renderState:d,instantSearchInstance:l,parent:g})}}),m.forEach(function(s){s.init&&s.init(ie(l,g,l._initialUiState))}),l.scheduleSearch()),this},removeWidgets:function(m){var g=this;if(!Array.isArray(m))throw new Error(G("The `removeWidgets` method expects an array of widgets."));if(m.some(function(j){return typeof j.dispose!="function"}))throw new Error(G("The widget definition expects a `dispose` method."));if(c=c.filter(function(j){return m.indexOf(j)===-1}),c.forEach(function(j){U(j)||(l&&j.dependsOn==="recommend"?l._hasRecommendWidget=!0:l?l._hasSearchWidget=!0:j.dependsOn==="recommend"?o=!0:i=!0)}),l&&m.length){var s=m.reduce(function(j,O){var E=O.dispose({helper:v,state:j.cleanedSearchState,recommendState:j.cleanedRecommendState,parent:g});return E instanceof k.RecommendParameters?j.cleanedRecommendState=E:E&&(j.cleanedSearchState=E),j},{cleanedSearchState:v.state,cleanedRecommendState:v.recommendState}),d=s.cleanedSearchState,_=s.cleanedRecommendState,S=l.future.preserveSharedStateOnUnmount?X(c,{uiState:f,initialSearchParameters:new k.SearchParameters({index:this.getIndexName()})}):X(c,{uiState:Z(c,{searchParameters:d,helper:v}),initialSearchParameters:d});f=Z(c,{searchParameters:S,helper:v}),v.setState(S),v.recommendState=_,c.length&&l.scheduleSearch()}return this},init:function(m){var g=this,s,d=m.instantSearchInstance,_=m.parent,S=m.uiState;if(v===null){l=d,p=_,f=S[u]||{};var j=d.mainHelper,O=X(c,{uiState:f,initialSearchParameters:new k.SearchParameters({index:n})}),E=wt(c,{uiState:f,initialRecommendParameters:new k.RecommendParameters});v=k({},O.index,O),v.recommendState=E,v.search=function(){return d.onStateChange?(d.onStateChange({uiState:d.mainIndex.getWidgetUiState({}),setUiState:function(b){return d.setUiState(b,!1)}}),j):j.search()},v.searchWithoutTriggeringOnStateChange=function(){return j.search()},v.searchForFacetValues=function(F,b,w,A){var C=v.state.setQueryParameters(A);return j.searchForFacetValues(F,b,w,C)},y=j.derive(function(){return Ir.apply(void 0,[j.state].concat(Mt(Dr(g))))},function(){return g.getHelper().recommendState});var h=(s=d._initialResults)===null||s===void 0?void 0:s[this.getIndexId()];if(h!=null&&h.results){var R=new k.SearchResults(new k.SearchParameters(h.state),h.results);y.lastResults=R,v.lastResults=R}if(h!=null&&h.recommendResults){var P=new k.RecommendResults(new k.RecommendParameters({params:h.recommendResults.params}),h.recommendResults.results);y.lastRecommendResults=P,v.lastRecommendResults=P}v.on("change",function(F){var b=F.isPageReset;b&&kt(c)}),y.on("search",function(){d.scheduleStalledRender()}),y.on("result",function(F){var b=F.results;d.scheduleRender(),v.lastResults=b,x=b?._state}),y.on("recommend:result",function(F){var b=F.recommend;d.scheduleRender(),v.lastRecommendResults=b.results}),c.forEach(function(F){if(F.getRenderState){var b=F.getRenderState(d.renderState[g.getIndexId()]||{},ie(d,g,S));Ne({renderState:b,instantSearchInstance:d,parent:g})}}),c.forEach(function(F){F.init&&F.init(ie(d,g,S))}),v.on("change",function(F){var b=F.state,w=F._uiState;f=Z(c,{searchParameters:b,helper:v},w||{}),d.onStateChange||d.onInternalStateChange()}),h&&d.scheduleRender(),o&&(d._hasRecommendWidget=!0),i&&(d._hasSearchWidget=!0)}},render:function(m){var g,s=this,d=m.instantSearchInstance;d.status==="error"&&!d.mainHelper.hasPendingRequests()&&x&&v.setState(x);var _=this.getResults()||(g=y)!==null&&g!==void 0&&g.lastRecommendResults?c:c.filter(U);_=_.filter(function(S){return S.shouldRender?S.shouldRender({instantSearchInstance:d}):!0}),_.forEach(function(S){if(S.getRenderState){var j=S.getRenderState(d.renderState[s.getIndexId()]||{},Ye(d,s,S));Ne({renderState:j,instantSearchInstance:d,parent:s})}}),_.forEach(function(S){S.render&&S.render(Ye(d,s,S))})},dispose:function(){var m=this,g,s;c.forEach(function(d){d.dispose&&v&&d.dispose({helper:v,state:v.state,recommendState:v.recommendState,parent:m})}),l=null,p=null,(g=v)===null||g===void 0||g.removeAllListeners(),v=null,(s=y)===null||s===void 0||s.detach(),y=null},getWidgetUiState:function(m){return c.filter(U).reduce(function(g,s){return s.getWidgetUiState(g)},M(M({},m),{},K({},u,M(M({},m[u]),f))))},getWidgetState:function(m){return this.getWidgetUiState(m)},getWidgetSearchParameters:function(m,g){var s=g.uiState;return X(c,{uiState:s,initialSearchParameters:m})},refreshUiState:function(){f=Z(c,{searchParameters:this.getHelper().state,helper:this.getHelper()},f)},setIndexUiState:function(m){var g=typeof m=="function"?m(f):m;l.setUiState(function(s){return M(M({},s),{},K({},u,g))})}}};function Ne(t){var e=t.renderState,n=t.instantSearchInstance,r=t.parent,u=r?r.getIndexId():n.mainIndex.getIndexId();n.renderState=M(M({},n.renderState),{},K({},u,M(M({},n.renderState[u]),e)))}export{ae as T,mn as a,vr as b,on as c,ie as d,pn as e,dn as f,vn as g,dr as h,U as i,Rn as j,k,gr as l,Ge as m,fn as n,ln as o,gn as p,hr as q,It as r,fr as s,hn as u};
